# ADR-0001: モノレポ構成の採用

## ステータス

承認済み

## コンテキスト

Groovy LSP拡張機能プロジェクトは、以下の2つの主要コンポーネントから構成されます：
- Java実装のLSPコア
- TypeScript実装のVSCode拡張機能

これらのコンポーネントの管理方法として、以下の選択肢を検討しました：
1. 別々のリポジトリで管理（マルチレポ）
2. 単一のリポジトリで管理（モノレポ）

## 決定

単一のリポジトリでLSPコアとVSCode拡張機能を管理する**モノレポ構成**を採用します。

## 根拠

### 1. 自律駆動型エージェントのアクセシビリティ
- AIエージェントが単一のコンテキストで全体像を把握できる
- ファイル間の依存関係を容易に追跡可能
- クロスコンポーネントの変更を一度に実施可能

### 2. 開発効率の向上
- LSPプロトコルの変更時に両側の実装を同時に更新可能
- 統合テストの実装が容易
- リファクタリング時の影響範囲を把握しやすい

### 3. バージョン管理の簡素化
- LSPコアと拡張機能のバージョンを同期的に管理
- リリースプロセスの統一
- 依存関係の不整合を防止

### 4. CI/CDパイプラインの統合
- 単一のワークフローで全体をビルド・テスト
- コード品質の統一的な管理
- デプロイメントの自動化が容易

## 影響

### ポジティブな影響
- 開発者の認知的負荷の軽減
- プロジェクト全体の一貫性向上
- セットアップ手順の簡素化
- クロスコンポーネントのリファクタリングが容易

### ネガティブな影響
- リポジトリサイズの増大
- ビルド時間の潜在的な増加
- 言語固有のツールチェーンの混在

### 軽減策
- 適切なディレクトリ構造により責務を明確に分離
- 言語別のビルドキャッシュを活用
- 必要に応じて選択的ビルドを実装

## 代替案

### マルチレポ構成
別々のリポジトリで管理する案も検討しましたが、以下の理由で却下：
- エージェントが複数リポジトリを跨いだ作業が困難
- バージョン同期の複雑性
- 統合テストの実装が煩雑

## 参考資料

- [Monorepo vs Polyrepo](https://monorepo.tools/)
- [Google's Monorepo](https://cacm.acm.org/magazines/2016/7/204032-why-google-stores-billions-of-lines-of-code-in-a-single-repository/fulltext)